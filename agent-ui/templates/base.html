<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{% block title %}Agent UI{% endblock %}</title>
<script src="https://unpkg.com/htmx.org@2.0.4"></script>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: #0d1117;
  color: #e6edf3;
  font-family: 'Courier New', monospace;
  padding: 2rem;
  font-size: 14px;
  max-width: 1000px;
}
.header-row {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: 0.2rem;
}
h1 { color: #58a6ff; font-size: 1rem; letter-spacing: 3px; }
.mem-bar { font-size: 0.75rem; color: #484f58; }
.ts { color: #484f58; font-size: 0.75rem; margin-bottom: 1.5rem; }
nav { margin-bottom: 2rem; }
nav a {
  color: #58a6ff;
  text-decoration: none;
  margin-right: 1.5rem;
  font-size: 0.85rem;
  letter-spacing: 1px;
}
nav a:hover { text-decoration: underline; }
nav a.active { color: #3fb950; }
section { margin-bottom: 2rem; }
h2 {
  color: #8b949e;
  font-size: 0.7rem;
  letter-spacing: 4px;
  text-transform: uppercase;
  border-bottom: 1px solid #21262d;
  padding-bottom: 0.4rem;
  margin-bottom: 0.75rem;
}
.row {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.45rem 0;
  border-bottom: 1px solid #161b22;
}
.dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.dot-green  { background: #3fb950; box-shadow: 0 0 6px #3fb95055; }
.dot-red    { background: #f85149; }
.dot-yellow { background: #d29922; box-shadow: 0 0 6px #d2992255; }
.badge {
  font-size: 0.7rem;
  padding: 1px 8px;
  border-radius: 3px;
  letter-spacing: 1px;
  min-width: 70px;
  text-align: center;
}
.badge-ok   { background: #0d4429; color: #3fb950; }
.badge-err  { background: #3d1414; color: #f85149; }
.badge-warn { background: #2d2000; color: #d29922; }
label { color: #8b949e; font-size: 0.85rem; display: block; margin-bottom: 0.3rem; }
input, select, textarea {
  background: #161b22;
  border: 1px solid #30363d;
  color: #e6edf3;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  padding: 0.5rem;
  border-radius: 3px;
  width: 100%;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: #58a6ff;
}
button {
  background: #1f6feb;
  color: #fff;
  border: none;
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
  padding: 0.5rem 1.5rem;
  border-radius: 3px;
  cursor: pointer;
  letter-spacing: 1px;
  margin-top: 0.75rem;
}
button:hover { background: #388bfd; }
.form-row { margin-bottom: 0.75rem; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.htmx-indicator { display: none; color: #d29922; font-size: 0.85rem; margin-top: 0.5rem; }
.htmx-request .htmx-indicator { display: block; }
.htmx-request button { opacity: 0.5; pointer-events: none; }
a { color: #58a6ff; text-decoration: none; }
a:hover { text-decoration: underline; }
.stat { display: inline-block; margin-right: 2rem; margin-bottom: 0.5rem; }
.stat-label { color: #484f58; font-size: 0.75rem; }
.stat-value { color: #e6edf3; font-size: 1rem; }
pre {
  background: #161b22;
  border: 1px solid #30363d;
  padding: 1rem;
  border-radius: 3px;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: #e6edf3;
  font-size: 0.85rem;
  margin-top: 0.5rem;
}
.error-box {
  background: #3d1414;
  border: 1px solid #f85149;
  color: #f85149;
  padding: 0.75rem 1rem;
  border-radius: 3px;
  font-size: 0.85rem;
}
.meta { color: #484f58; font-size: 0.75rem; margin-top: 0.5rem; }
table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
th {
  color: #484f58;
  font-size: 0.7rem;
  letter-spacing: 2px;
  text-transform: uppercase;
  border-bottom: 1px solid #21262d;
  padding: 0.4rem 0.5rem;
  text-align: left;
}
td { padding: 0.35rem 0.5rem; border-bottom: 1px solid #161b22; color: #8b949e; }
td.hi { color: #e6edf3; }
tr:hover td { background: #161b22; }
</style>
</head>
<body>

<div class="header-row">
  <h1>◈ AGENT UI</h1>
  <div class="mem-bar" id="mem-header"
       hx-get="/memory/header"
       hx-trigger="load, every 15s"
       hx-target="#mem-header"
       hx-swap="innerHTML">
  </div>
</div>
<div class="ts">Orchestrátor — Claude + Ollama · port 8100</div>

<nav>
  <a href="/" {% if active == 'dashboard' %}class="active"{% endif %}>Dashboard</a>
  <a href="/ask" {% if active == 'ask' %}class="active"{% endif %}>Dotaz</a>
  <a href="/conversations" {% if active == 'conversations' %}class="active"{% endif %}>Konverzace</a>
  <a href="/templates" {% if active == 'templates' %}class="active"{% endif %}>Šablony</a>
  <a href="/stats" {% if active == 'stats' %}class="active"{% endif %}>Statistiky</a>
</nav>

{% block content %}{% endblock %}

<script>
function updateSpinner() {
  const backend = document.querySelector('[name=backend_force]');
  const model   = document.querySelector('[name=model]');
  const sp      = document.getElementById('spinner-text');
  if (!sp) return;
  const b = backend ? backend.value : 'auto';
  const m = model   ? model.value   : 'auto';
  const isOllama = b === 'ollama' || m === 'local' || m === 'deepseek';
  if (isOllama) {
    const name = m === 'deepseek' ? 'deepseek-coder:33b' : 'qwen2.5-coder:14b';
    sp.textContent = '⟳ Ollama / ' + name + ' zpracovává… (30–120s)';
  } else if (b === 'claude-code') {
    sp.textContent = '⟳ Claude Code (Pro) zpracovává…';
  } else if (b === 'claude-api') {
    sp.textContent = '⟳ Claude API zpracovává…';
  } else {
    sp.textContent = '⟳ Zpracovává…';
  }
}
</script>
</body>
</html>
