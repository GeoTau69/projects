{
  "project": "dashboard",
  "display_name": "Projects Dashboard",
  "version": "1.0.0",
  "updated": "2026-02-20",
  "description": "Centr√°ln√≠ monitoring dashboard pro live stav v≈°ech slu≈æeb a syst√©mov√Ωch m√≥d≈Ø v workspace.",
  "status": "active",
  "port": 8099,
  "tech": ["python", "stdlib"],
  "access": {
    "local": "http://localhost:8099",
    "lan": "http://192.168.0.101:8099",
    "tailscale": "http://fedora:8099 ¬∑ http://100.117.55.88:8099"
  },
  "back_link": {"href": "/", "label": "üè† Zpƒõt na Dashboard"},
  "modules": [
    {
      "id": "dashboard_py",
      "name": "dashboard.py",
      "file": "dashboard.py",
      "purpose": "Single-file aplikace ‚Äî HTTP server s live HTML dashboard pro monitoring",
      "status": "stable",
      "public_methods": [
        {
          "name": "run_cmd",
          "params": "cmd: list[str]",
          "returns": "tuple[str, int]",
          "description": "Spust√≠ shell p≈ô√≠kaz s timeoutem 3s, vr√°t√≠ (stdout, returncode)."
        },
        {
          "name": "svc_status",
          "params": "name: str, user_svc: bool",
          "returns": "str",
          "description": "Vr√°t√≠ systemd stav slu≈æby: 'active', 'inactive', 'unknown'."
        },
        {
          "name": "remote_mode_active",
          "params": "",
          "returns": "bool",
          "description": "Zjist√≠, zda je Tailscale Funnel aktivn√≠ (port 8765)."
        },
        {
          "name": "load_systems",
          "params": "",
          "returns": "dict",
          "description": "Naƒçte konfiguraci ze ~/.systems.json (services + modes)."
        },
        {
          "name": "build_html",
          "params": "",
          "returns": "str",
          "description": "Generuje HTML: naƒçte stav slu≈æeb/m√≥d≈Ø, vr√°t√≠ vykreslenou str√°nku."
        }
      ],
      "dependencies": ["stdlib: json, subprocess, datetime, http.server, pathlib"],
      "notes": "Zero-dependency aplikace. HTML ≈°ablona inline (raw string). Auto-refresh: 5s (meta tag). Konfigurace ƒçtena ze .systems.json p≈ôi ka≈æd√©m requestu (live data)."
    }
  ],
  "sections": [
    {
      "id": "prehled",
      "title": "P≈ôehled",
      "icon": "üìä",
      "blocks": [
        {
          "type": "text",
          "text": "<strong>Projects Dashboard</strong> je centr√°ln√≠ monitoring panel pro stav v≈°ech slu≈æeb a syst√©mov√Ωch m√≥d≈Ø v workspace. ƒåte konfiguraci ze <code>~/.systems.json</code> a zobrazuje live status s 5sekundov√Ωm auto-refresh."
        },
        {
          "type": "text",
          "text": "<strong>Proƒç ho m√°me:</strong> Jedin√© m√≠sto, kde vid√≠m, kter√© slu≈æby bƒõ≈æ√≠, jak√© jsou porty, a jak√© jsou aktivn√≠ syst√©mov√© m√≥dy (nap≈ô. Tailscale Funnel pro ve≈ôejn√Ω p≈ô√≠stup). Jeden pohled ‚Äî v≈°e je vidƒõt."
        },
        {
          "type": "table",
          "headers": ["Funkce", "Popis"],
          "rows": [
            ["<strong>Live monitoring</strong>", "Kontroluje systemd status ka≈æd√Ωch 5 sekund"],
            ["<strong>Services</strong>", "Seznam v≈°ech sledovan√Ωch slu≈æeb (port, status, URL)"],
            ["<strong>Modes</strong>", "Syst√©mov√© m√≥dy ‚Äî Tailscale, custom check p≈ô√≠kazy"],
            ["<strong>Timestamp</strong>", "Zobrazuje posledn√≠ refresh ‚Äî v√≠m, jak star√© jsou data"],
            ["<strong>Zero deps</strong>", "Python stdlib only ‚Äî bez pip instalac√≠"]
          ]
        }
      ]
    },
    {
      "id": "architektura",
      "title": "Architektura",
      "icon": "üèóÔ∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Komponenty"
        },
        {
          "type": "list",
          "entries": [
            "<strong>Backend:</strong> Python <code>http.server</code> (stdlib) ‚Äî sluch√° na :8099",
            "<strong>Frontend:</strong> HTML/CSS inline (dark theme, monospace)",
            "<strong>Config:</strong> <code>~/.systems.json</code> ‚Äî JSON se services + modes",
            "<strong>Refresh:</strong> HTML <code>&lt;meta http-equiv=\"refresh\" content=\"5\"&gt;</code> ‚Äî vynucuje reload",
            "<strong>Status check:</strong> <code>systemctl is-active</code> + custom p≈ô√≠kazy"
          ]
        },
        {
          "type": "heading",
          "text": "Request flow"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "Client GET /\n   ‚Üì\nDashboardHandler.do_GET()\n   ‚Üì\nbuild_html()\n   ‚îú‚îÄ load_systems() ‚Üí ƒçte ~/.systems.json\n   ‚îú‚îÄ Pro ka≈ædou slu≈æbu: svc_status() ‚Üí systemctl is-active\n   ‚îú‚îÄ Pro ka≈æd√Ω m√≥d: remote_mode_active() nebo run_cmd()\n   ‚îî‚îÄ Vr√°t√≠ HTML s vykreslen√Ωm stavem\n   ‚Üì\nClient dostane HTML ‚Üí browser renders + refresh za 5s"
        },
        {
          "type": "heading",
          "text": "Status indik√°tory"
        },
        {
          "type": "table",
          "headers": ["Stav", "Barva", "ƒåe≈°tina"],
          "rows": [
            ["<code>active</code>", "üü¢ Zelen√°", "Slu≈æba bƒõ≈æ√≠"],
            ["<code>inactive</code>", "üî¥ ƒåerven√°", "Slu≈æba zastavena"],
            ["<code>unknown</code>", "‚ö´ ≈†ed√°", "Chyba p≈ôi zji≈°≈•ov√°n√≠ stavu"]
          ]
        }
      ]
    },
    {
      "id": "konfigurace",
      "title": "Konfigurace (.systems.json)",
      "icon": "‚öôÔ∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Struktura"
        },
        {
          "type": "code",
          "lang": "json",
          "text": "{\n  \"services\": [\n    {\n      \"name\": \"backup-dashboard\",\n      \"systemd\": \"backup-dashboard\",\n      \"user_service\": true,\n      \"port\": 8090,\n      \"description\": \"3-vrstvov√Ω backup web\",\n      \"url_public\": \"http://fedora:8090\"\n    }\n  ],\n  \"modes\": [\n    {\n      \"id\": \"remote\",\n      \"name\": \"Tailscale Funnel\",\n      \"description\": \"Ve≈ôejn√Ω proxy p≈ôes Tailscale\"\n    }\n  ]\n}"
        },
        {
          "type": "heading",
          "text": "Pole Services"
        },
        {
          "type": "table",
          "headers": ["Pole", "Povinn√©", "Popis"],
          "rows": [
            ["<code>name</code>", "‚úÖ", "Jm√©no slu≈æby pro UI"],
            ["<code>systemd</code>", "‚úÖ", "Jm√©no systemd unit (bez .service)"],
            ["<code>user_service</code>", "‚úÖ", "true = <code>systemctl --user</code>, false = <code>systemctl</code>"],
            ["<code>port</code>", "‚ùå", "Port pro zobrazen√≠ (voliteln√Ω)"],
            ["<code>description</code>", "‚ùå", "Textov√Ω popis slu≈æby"],
            ["<code>url_public</code>", "‚ùå", "Ve≈ôejn√° URL s ‚Üó linkem"]
          ]
        },
        {
          "type": "heading",
          "text": "Pole Modes"
        },
        {
          "type": "table",
          "headers": ["Pole", "Popis"],
          "rows": [
            ["<code>id</code>", "Identifik√°tor (\"remote\" = Tailscale Funnel, custom = run_cmd)"],
            ["<code>name</code>", "Jm√©no m√≥du v UI"],
            ["<code>description</code>", "Popis"],
            ["<code>check_cmd</code>", "P≈ô√≠kaz ke spu≈°tƒõn√≠ (vr√°t√≠ 0 = ON, non-0 = OFF)"]
          ]
        }
      ]
    },
    {
      "id": "jak-funguje",
      "title": "Jak to funguje",
      "icon": "‚ö°",
      "blocks": [
        {
          "type": "heading",
          "text": "Services ‚Äî systemd monitoring"
        },
        {
          "type": "text",
          "text": "Pro ka≈ædou slu≈æbu v <code>services</code> seznamu:"
        },
        {
          "type": "list",
          "ordered": true,
          "entries": [
            "ƒåti <code>systemd</code> a <code>user_service</code> pole",
            "Spust√≠ <code>systemctl [--user] is-active {name}</code>",
            "Dostane odpovƒõƒè: <code>active</code>, <code>inactive</code>, nebo chyba",
            "Vykresl√≠ zelenou/ƒçervenou teƒçku + status badge",
            "Pokud existuje <code>url_public</code>, p≈ôid√° ‚Üó odkaz"
          ]
        },
        {
          "type": "heading",
          "text": "Modes ‚Äî custom check p≈ô√≠kazy"
        },
        {
          "type": "text",
          "text": "Dva typy m√≥d≈Ø:"
        },
        {
          "type": "list",
          "entries": [
            "<strong>Remote (Tailscale Funnel):</strong> Hardcoded logika ‚Äî spust√≠ <code>tailscale funnel status</code>, hled√° '8765' nebo 'fedora.tail' v outputu",
            "<strong>Custom:</strong> Runs <code>check_cmd</code> p≈ô√≠kaz ‚Äî pokud vr√°t√≠ exit code 0 = ON, jinak = OFF"
          ]
        },
        {
          "type": "heading",
          "text": "Auto-refresh mechanismus"
        },
        {
          "type": "text",
          "text": "HTML obsahuje: <code>&lt;meta http-equiv=\"refresh\" content=\"5\"&gt;</code> ‚Äî browser automaticky obnov√≠ str√°nku ka≈æd√Ωch 5 sekund. P≈ôi refresh se:"
        },
        {
          "type": "list",
          "ordered": true,
          "entries": [
            "Spust√≠ <code>build_html()</code> ‚Äî znovu naƒçte .systems.json",
            "Znovu zkontroluje v≈°echny systemd stavy",
            "Znovu spust√≠ v≈°echny check p≈ô√≠kazy",
            "Vr√°t√≠ ƒçerstv√© HTML s aktu√°ln√≠m stavem",
            "Browser zobraz√≠ novou str√°nku s nov√Ωm timestampem"
          ]
        }
      ]
    },
    {
      "id": "services",
      "title": "Services monitoring",
      "icon": "üîß",
      "blocks": [
        {
          "type": "heading",
          "text": "Typick√Ω services seznam"
        },
        {
          "type": "table",
          "headers": ["Slu≈æba", "Systemd", "Port", "User svc"],
          "rows": [
            ["backup-dashboard", "backup-dashboard", "8090", "‚úÖ"],
            ["dashboard (s√°m sebe)", "projects-dashboard", "8099", "‚úÖ"],
            ["docs", "docs", "8080", "‚úÖ"],
            ["web-edit", "mdserver", "8765", "‚úÖ"],
            ["Gitea", "gitea", "3000", "‚ùå"]
          ]
        },
        {
          "type": "heading",
          "text": "Co vid√≠m v UI"
        },
        {
          "type": "text",
          "text": "Ka≈æd√° slu≈æba m√° ≈ô√°dek s:"
        },
        {
          "type": "list",
          "entries": [
            "üü¢/üî¥ barevn√° teƒçka (status)",
            "Jm√©no slu≈æby",
            "Port (pokud nastaven)",
            "Popis",
            "ACTIVE/INACTIVE badge",
            "‚Üó odkaz (pokud url_public)"
          ]
        }
      ]
    },
    {
      "id": "modes",
      "title": "Modes ‚Äî syst√©mov√© m√≥dy",
      "icon": "üéõÔ∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Tailscale Funnel"
        },
        {
          "type": "text",
          "text": "Speci√°ln√≠ m√≥d ‚Äî ukazuje, jestli je Tailscale Funnel aktivn√≠ (ve≈ôejn√Ω proxy na :8765). Spust√≠ <code>tailscale funnel status</code> a hled√° 'fedora.tail' v outputu."
        },
        {
          "type": "card",
          "variant": "info",
          "title": "‚ÑπÔ∏è Co je Tailscale Funnel",
          "text": "Ve≈ôejn√Ω HTTPS proxy p≈ôes Tailscale network. Pokud je aktivn√≠, m≈Ø≈æe≈° sd√≠let <code>https://fedora.tail41712d.ts.net/</code> bez port≈Ø a bez firewallu."
        },
        {
          "type": "heading",
          "text": "Custom check p≈ô√≠kazy"
        },
        {
          "type": "text",
          "text": "P≈ô√≠klady custom m√≥d≈Ø:"
        },
        {
          "type": "code",
          "lang": "json",
          "text": "{\n  \"id\": \"backup\",\n  \"name\": \"Backup service\",\n  \"check_cmd\": \"curl -s http://localhost:8090/health\"\n}\n\n{\n  \"id\": \"vpn\",\n  \"name\": \"VPN connection\",\n  \"check_cmd\": \"ping -c 1 8.8.8.8\"\n}"
        }
      ]
    },
    {
      "id": "cli",
      "title": "CLI & Spu≈°tƒõn√≠",
      "icon": "‚å®Ô∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Systemd"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "systemctl --user status projects-dashboard\nsystemctl --user start projects-dashboard\nsystemctl --user restart projects-dashboard\nsystemctl --user stop projects-dashboard\njournalctl --user -u projects-dashboard -f"
        },
        {
          "type": "heading",
          "text": "Manu√°ln√≠ spu≈°tƒõn√≠ (dev)"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "cd ~/projects/dashboard\npython3 dashboard.py\n# Output: Dashboard: http://localhost:8099/"
        },
        {
          "type": "heading",
          "text": "Konfigurace editace"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "# Edituj .systems.json\nvim ~/.systems.json\n\n# Dashboard si ho p≈ôeƒçte p≈ôi dal≈°√≠m refresh (5s)\n# Nebo manu√°lnƒõ refresh str√°nku v prohl√≠≈æeƒçi"
        }
      ]
    },
    {
      "id": "proc-to-mame",
      "title": "Proƒç to m√°me",
      "icon": "‚ùì",
      "blocks": [
        {
          "type": "heading",
          "text": "Monitoring bez CLI"
        },
        {
          "type": "text",
          "text": "M√≠sto aby sis pamatoval 20 p≈ô√≠kaz≈Ø (<code>systemctl status backup-dashboard</code>, <code>curl localhost:8090</code>, atd.), m√°≈° v≈°e v jednom dashboardu. Otev≈ôi prohl√≠≈æeƒç ‚Äî vid√≠≈° v≈°echno."
        },
        {
          "type": "heading",
          "text": "Detekce padl√Ωch slu≈æeb"
        },
        {
          "type": "text",
          "text": "Kdy≈æ se nƒõco slamne, vid√≠≈° to okam≈æitƒõ ‚Äî ƒçerven√° teƒçka. Auto-refresh means pokud si nƒõkdo slu≈æbu restartuje, vid√≠≈° to za 5 sekund bez ruƒçn√≠ho refreshu."
        },
        {
          "type": "heading",
          "text": "Ve≈ôejn√© adresy na jednom m√≠stƒõ"
        },
        {
          "type": "text",
          "text": "Ve≈ôejn√© URL slu≈æeb (Tailscale Funnel, LAN adresa) jsou viditeln√© s klikac√≠mi linky. Nemus√≠≈° si je pamatovat."
        },
        {
          "type": "heading",
          "text": "Syst√©mov√© m√≥dy"
        },
        {
          "type": "text",
          "text": "Ukazuje, jak√© jsou aktivn√≠ m√≥dy (VPN, Tailscale, custom healthchecks). Pomoc√≠ <code>check_cmd</code> m≈Ø≈æe≈° libovoln√Ω shell p≈ô√≠kaz –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å na \"je-li to ON/OFF\"."
        },
        {
          "type": "heading",
          "text": "Zero setup"
        },
        {
          "type": "text",
          "text": "≈Ω√°dn√© npm instalace, ≈æ√°dn√© framework magie. Python stdlib + HTML. Jednoduch√©, rychl√©, spolehliv√©."
        }
      ]
    },
    {
      "id": "faq",
      "title": "FAQ",
      "icon": "‚ùì",
      "blocks": [
        {
          "type": "heading",
          "text": "Jak p≈ôidat novou slu≈æbu?"
        },
        {
          "type": "text",
          "text": "Edituj <code>~/.systems.json</code>, p≈ôidej do <code>services</code> pole nov√Ω objekt s <code>name</code>, <code>systemd</code>, <code>user_service</code>, a volitelnƒõ <code>port</code>, <code>description</code>, <code>url_public</code>. Dashboard si to p≈ôeƒçte p≈ôi dal≈°√≠m refresh."
        },
        {
          "type": "heading",
          "text": "Jak vytvo≈ôit custom m√≥d?"
        },
        {
          "type": "text",
          "text": "P≈ôidej do <code>modes</code> pole objekt s <code>id</code>, <code>name</code>, <code>description</code>, a <code>check_cmd</code> (shell p≈ô√≠kaz kter√Ω vr√°t√≠ exit code 0 pokud je ON). P≈ô√≠kaz se spust√≠ s timeoutem 3 sekundy."
        },
        {
          "type": "heading",
          "text": "Refresh je pomal√Ω / spr√°vi star√© data"
        },
        {
          "type": "text",
          "text": "Auto-refresh je 5 sekund (v HTML <code>&lt;meta refresh&gt;</code>). Pokud chce≈° zmƒõnit interval, edituj ≈ô√°dek 22 v <code>dashboard.py</code>: <code>content=\"5\"</code> ‚Üí <code>content=\"10\"</code> pro 10 sekund."
        },
        {
          "type": "heading",
          "text": "Jak zjistit, proƒç slu≈æba ukazuje 'unknown'?"
        },
        {
          "type": "text",
          "text": "Spust√≠ ruƒçnƒõ: <code>systemctl [--user] is-active {systemd_name}</code>. Pokud vr√°t√≠ chybu, je to pravdƒõpodobnƒõ ≈°patn√© jm√©no unit, nebo user_service nastaven√≠ je ≈°patnƒõ."
        },
        {
          "type": "heading",
          "text": "Mohu z dashboardu ovl√°dat slu≈æby?"
        },
        {
          "type": "text",
          "text": "Ne ‚Äî je to read-only monitoring. Pokud chce≈° restart, udƒõlej to p≈ôes CLI: <code>systemctl --user restart backup-dashboard</code>. (Dashboard to pak st√°le zobraz√≠ jako 'inactive' na 5 sekund, ne≈æ se znovu spust√≠.)"
        }
      ]
    }
  ]
}
