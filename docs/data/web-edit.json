{
  "project": "web-edit",
  "display_name": "Micro DMS Collaborative Editor",
  "version": "1.0.0",
  "updated": "2026-02-20",
  "description": "Editor pro dokumentaci s real-time multi-user editac√≠ p≈ôes WebSocket.",
  "status": "active",
  "port": 8765,
  "tech": ["python", "aiohttp", "websocket"],
  "access": {
    "local": "http://localhost:8765",
    "lan": "http://192.168.0.101:8765",
    "tailscale": "http://fedora:8765"
  },
  "back_link": {"href": "/", "label": "üè† Zpƒõt na Dashboard"},
  "modules": [
    {
      "id": "mdserver",
      "name": "mdserver.py",
      "file": "mdserver.py",
      "purpose": "Single-file aplikace ‚Äî WebSocket server pro editaci markdownu s live preview.",
      "status": "stable",
      "public_methods": [
        {
          "name": "run",
          "params": "data_dir: str = '/home/geo/Shared/IC', port: int = 8765",
          "returns": "None",
          "description": "Spust√≠ aiohttp server s WebSocket supportem pro multi-user editaci."
        }
      ],
      "dependencies": ["aiohttp"],
      "notes": "CLI: mdserver.py [path] [port]. Z√°lohy: /home/geo/Shared/IC/tmp/. Vylouƒçen√© dirs: code, tmp, verze, .claude"
    }
  ],
  "sections": [
    {
      "id": "prehled",
      "title": "P≈ôehled",
      "icon": "üìù",
      "blocks": [
        {
          "type": "text",
          "text": "<strong>Micro DMS</strong> je online editor pro Markdown dokumentaci s <strong>real-time multi-user editac√≠</strong> p≈ôes WebSocket. V√≠ce lid√≠ m≈Ø≈æe editovat tent√Ω≈æ soubor najednou, ka≈æd√Ω vid√≠ live preview a zmƒõny ostatn√≠ch."
        },
        {
          "type": "table",
          "headers": ["Funkce", "Popis"],
          "rows": [
            ["<strong>Live preview</strong>", "Markdown se renderuje v re√°ln√©m ƒçase p≈ôi psan√≠"],
            ["<strong>Multi-user</strong>", "V√≠ce editor≈Ø najednou v jedn√© room"],
            ["<strong>WebSocket</strong>", "Low-latency komunikace, synchronizace"],
            ["<strong>Z√°lohy</strong>", "Automatick√© snapshoty do <code>/tmp/</code>"],
            ["<strong>Tailscale Funnel</strong>", "Ve≈ôejn√Ω p≈ô√≠stup bez port≈Ø ‚Äî <code>https://fedora.tail41712d.ts.net/</code>"]
          ]
        }
      ]
    },
    {
      "id": "pristup",
      "title": "P≈ô√≠stup",
      "icon": "üåê",
      "blocks": [
        {
          "type": "table",
          "headers": ["S√≠≈•", "URL"],
          "rows": [
            ["<strong>Lok√°ln√≠</strong>", "<code>http://localhost:8765</code>"],
            ["<strong>LAN</strong>", "<code>http://192.168.0.101:8765</code>"],
            ["<strong>Tailscale</strong>", "<code>http://fedora:8765</code>"]
          ]
        },
        {
          "type": "heading",
          "text": "Ve≈ôejn√Ω p≈ô√≠stup ‚Äî Tailscale Funnel"
        },
        {
          "type": "text",
          "text": "Pro ve≈ôejn√© sd√≠len√≠ bez port≈Ø: <code>https://fedora.tail41712d.ts.net/</code> ‚Äî HTTPS proxy p≈ôes Tailscale, autentizace Tailscale."
        }
      ]
    },
    {
      "id": "architektura",
      "title": "Architektura",
      "icon": "üèóÔ∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Komponenty"
        },
        {
          "type": "list",
          "entries": [
            "<strong>Backend:</strong> Python <code>aiohttp</code> + WebSocket (asynchronn√≠)",
            "<strong>Frontend:</strong> HTML/CSS/JS inline (dark theme, no frameworks)",
            "<strong>Live preview:</strong> Marked.js pro Markdown rendering",
            "<strong>Data:</strong> <code>/home/geo/Shared/IC</code> ‚Äî p≈ô√≠slu≈°n√Ω adres√°≈ô"
          ]
        },
        {
          "type": "heading",
          "text": "Multi-user synchronizace"
        },
        {
          "type": "text",
          "text": "WebSocket rooms ‚Äî ka≈æd√° otev≈ôen√° m√≠stnost = jeden <code>.md</code> soubor. Editory v Room A nevid√≠ zmƒõny v Room B. Synchronizace je optimistick√° ‚Äî p≈ôedpokl√°d√°me, ≈æe editory nekonfliktuj√≠ (proto≈æe sd√≠l√≠ stejn√Ω session)."
        },
        {
          "type": "heading",
          "text": "Z√°lohy"
        },
        {
          "type": "text",
          "text": "P≈ôi ka≈æd√©m ulo≈æen√≠ se <code>soubor.md</code> z√°lohuje do <code>/home/geo/Shared/IC/tmp/</code> s timestamp: <code>soubor_2026-02-20_143015.md</code>."
        }
      ]
    },
    {
      "id": "cli",
      "title": "CLI & Spu≈°tƒõn√≠",
      "icon": "‚å®Ô∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "P≈ô√≠kaz≈Øm"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "# V√Ωchoz√≠ ‚Äî /home/geo/Shared/IC, port 8765\npython3 web-edit/mdserver.py\n\n# Vlastn√≠ adres√°≈ô a port\npython3 web-edit/mdserver.py /var/docs 9000\n\n# Systemd\nsystemctl --user status mdserver\nsystemctl --user restart mdserver\njournalctl --user -u mdserver -f"
        },
        {
          "type": "heading",
          "text": "Init (dev mode)"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "cd ~/projects/web-edit\npython3 mdserver.py /home/geo/Shared/IC 8765"
        }
      ]
    },
    {
      "id": "use-cases",
      "title": "Use Cases",
      "icon": "üí°",
      "blocks": [
        {
          "type": "heading",
          "text": "Case 1: Spoleƒçn√© psan√≠ dokumentace"
        },
        {
          "type": "text",
          "text": "Dva lid√© p√≠≈°√≠ dokumentaci pro projekt. Otev≈ôou stejn√Ω <code>.md</code> soubor v Micro DMS. Obou vid√≠ live preview druh√©ho ‚Äî bez merge konflikt≈Ø."
        },
        {
          "type": "heading",
          "text": "Case 2: Ve≈ôejn√© sd√≠len√≠ ‚Äî Tailscale Funnel"
        },
        {
          "type": "text",
          "text": "Sd√≠l√≠≈° URL <code>https://fedora.tail41712d.ts.net/</code> s klientem. Klient se p≈ôipoj√≠ a v√≠d√≠ dokumentaci ‚Äî bez VPN, bez port≈Ø."
        },
        {
          "type": "heading",
          "text": "Case 3: Integrace se SYNC bloky"
        },
        {
          "type": "text",
          "text": "Micro DMS je ide√°ln√≠ pro editaci <code><!-- SYNC:START --></code> blok≈Ø v CLAUDE.md souborech ‚Äî live preview, multi-user, z√°lohy."
        }
      ]
    },
    {
      "id": "slovnik",
      "title": "Slovn√≠k pojm≈Ø",
      "icon": "üìñ",
      "blocks": [
        {
          "type": "heading",
          "text": "Room (WebSocket m√≠stnost)"
        },
        {
          "type": "text",
          "text": "Jedno otev≈ôen√≠ jednoho souboru = jedna Room. Pokud soubor otev≈ôe≈° dvakr√°t (v dvou oknech), jsou to dvƒõ oddƒõlen√© Rooms se sv√Ωmi buffery."
        },
        {
          "type": "heading",
          "text": "Live preview"
        },
        {
          "type": "text",
          "text": "Markdown se rend√©ruje v re√°ln√©m ƒçase v prav√©m panelu. Klidn√© psan√≠ ‚Äî preview se automaticky aktualizuje."
        },
        {
          "type": "heading",
          "text": "Tailscale Funnel"
        },
        {
          "type": "text",
          "text": "Ve≈ôejn√Ω proxy p≈ôes Tailscale ‚Äî p≈ôen√°≈°√≠≈° localhost port na ve≈ôejnou HTTPS URL bez port≈Ø, firewallu."
        }
      ]
    },
    {
      "id": "faq",
      "title": "FAQ",
      "icon": "‚ùì",
      "blocks": [
        {
          "type": "heading",
          "text": "Jak se synchronizuj√≠ editory?"
        },
        {
          "type": "text",
          "text": "WebSocket ‚Äî server brodcastuje zmƒõny v≈°em klient≈Øm v Room. Optimistick√° synchronizace ‚Äî p≈ôedpokl√°d√°me, ≈æe editory nekonfliktuj√≠."
        },
        {
          "type": "heading",
          "text": "Co kdy≈æ se edituj√≠c√≠ odpoj√≠?"
        },
        {
          "type": "text",
          "text": "Buffer se zahod ‚Äî je to ephemeral. Ulo≈æ si zmƒõny, ne≈æ se odpoj√≠≈° (je tlaƒç√≠tko Save)."
        },
        {
          "type": "heading",
          "text": "Kde jsou z√°lohy?"
        },
        {
          "type": "text",
          "text": "<code>/home/geo/Shared/IC/tmp/</code> ‚Äî ka≈æd√© ulo≈æen√≠ si dƒõl√° snapshot s timestampem."
        },
        {
          "type": "heading",
          "text": "Je to zabezpeƒçeno?"
        },
        {
          "type": "text",
          "text": "Tailscale Funnel m√° autentizaci p≈ôes Tailscale. WebSocket je plain HTTP ‚Äî nen√≠ to pro produkci na internetu bez TLS."
        }
      ]
    },
    {
      "id": "tech",
      "title": "Technick√© detaily",
      "icon": "üîß",
      "blocks": [
        {
          "type": "heading",
          "text": "Dependencies"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "pip install aiohttp\n# V≈°e ostatn√≠: stdlib Python"
        },
        {
          "type": "heading",
          "text": "Single-file architektura"
        },
        {
          "type": "text",
          "text": "<code>mdserver.py</code> obsahuje v≈°e: HTTP handler, WebSocket, file I/O, logging. Neexistuj√≠ ≈æ√°dn√© dal≈°√≠ moduly ƒçi route files."
        },
        {
          "type": "heading",
          "text": "Vylouƒçen√© adres√°≈ôe"
        },
        {
          "type": "text",
          "text": "V file listingu jsou schovan√©: <code>code/</code>, <code>tmp/</code>, <code>verze/</code>, <code>.claude/</code> ‚Äî aby se neobjevovaly v UI."
        }
      ]
    }
  ]
}
