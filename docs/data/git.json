{
  "project": "git",
  "display_name": "Git Integrace",
  "version": "1.0.0",
  "updated": "2026-02-20",
  "description": "Centr√°ln√≠ dokumentace git setupu, workflow a integrace nap≈ô√≠ƒç workspace.",
  "status": "active",
  "port": null,
  "tech": ["git", "gitea", "github"],
  "sections": [
    {
      "id": "prehled",
      "title": "P≈ôehled",
      "icon": "üìö",
      "blocks": [
        {
          "type": "text",
          "text": "Workspace <code>~/projects/</code> je <strong>monorepo</strong> ‚Äî jeden git repozit√°≈ô pro v≈°echny projekty. <strong>Prim√°rn√≠ remote:</strong> Gitea (lok√°ln√≠), <strong>mirror:</strong> GitHub (automaticky)."
        },
        {
          "type": "table",
          "headers": ["Atribut", "Hodnota"],
          "rows": [
            ["<strong>Identita</strong>", "<code>geo &lt;jk@kompi.cz&gt;</code>"],
            ["<strong>Default branch</strong>", "<code>main</code>"],
            ["<strong>Prim√°rn√≠ remote</strong>", "Gitea <code>localhost:3000</code>"],
            ["<strong>Mirror</strong>", "GitHub <code>GeoTau69/projects</code>"],
            ["<strong>Autentizace</strong>", "Gitea: HTTP Basic (~/.git-credentials), GitHub: SSH (~/.ssh/id_ed25519)"]
          ]
        }
      ]
    },
    {
      "id": "pristup",
      "title": "P≈ô√≠stupy",
      "icon": "üåê",
      "blocks": [
        {
          "type": "heading",
          "text": "Gitea (prim√°rn√≠)"
        },
        {
          "type": "table",
          "headers": ["S√≠≈•", "URL"],
          "rows": [
            ["<strong>Lok√°ln√≠</strong>", "<code>http://localhost:3000</code>"],
            ["<strong>LAN</strong>", "<code>http://192.168.0.101:3000</code>"],
            ["<strong>Tailscale</strong>", "<code>http://fedora:3000</code> ¬∑ <code>http://100.117.55.88:3000</code>"]
          ]
        },
        {
          "type": "heading",
          "text": "GitHub (mirror)"
        },
        {
          "type": "text",
          "text": "Repozit√°≈ô: <code>github.com/GeoTau69/projects</code> ‚Äî automaticky synced z Gitea."
        }
      ]
    },
    {
      "id": "remoty",
      "title": "Git Remoty",
      "icon": "üîó",
      "blocks": [
        {
          "type": "table",
          "headers": ["Remote", "URL", "Typ"],
          "rows": [
            ["<code>gitea</code>", "<code>http://localhost:3000/geo/projects.git</code>", "prim√°rn√≠ (HTTP)"],
            ["<code>github</code>", "<code>git@github.com:GeoTau69/projects.git</code>", "mirror (SSH)"]
          ]
        },
        {
          "type": "heading",
          "text": "Push na oba remoty"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git push gitea main && git push github main"
        }
      ]
    },
    {
      "id": "credentials",
      "title": "Autentizace",
      "icon": "üîê",
      "blocks": [
        {
          "type": "heading",
          "text": "Gitea ‚Äî HTTP Basic Auth"
        },
        {
          "type": "card",
          "variant": "info",
          "title": "üîë ~/.git-credentials",
          "text": "Obsahuje HTTP Basic Auth pro Gitea. Form√°t: <code>http://user:password@host</code>"
        },
        {
          "type": "heading",
          "text": "GitHub ‚Äî SSH"
        },
        {
          "type": "card",
          "variant": "info",
          "title": "üîë ~/.ssh/id_ed25519",
          "text": "EdDSA priv√°tn√≠ kl√≠ƒç pro SSH autentizaci. Ve≈ôejn√Ω kl√≠ƒç: <code>~/.ssh/id_ed25519.pub</code>"
        },
        {
          "type": "heading",
          "text": "GitHub CLI"
        },
        {
          "type": "text",
          "text": "P≈ô√≠kaz <code>gh</code> umo≈æ≈àuje spr√°vu GitHub PR, issues, atd. Autentizace: <code>gh auth login</code>"
        }
      ]
    },
    {
      "id": "workflow",
      "title": "Git Workflow",
      "icon": "‚ôªÔ∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Z√°kladn√≠ workflow"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git status                           # Ovƒõ≈ô stav\ngit add <soubory>                  # Nikdy git add -A (m≈Ø≈æe p≈ôidat .env, *.backup-*)\ngit commit -m \"zpr√°va\"              # Vytvo≈ô commit\ngit push gitea main && git push github main  # Push na oba remoty"
        },
        {
          "type": "heading",
          "text": "Komitov√°n√≠ z dashboardu"
        },
        {
          "type": "text",
          "text": "<code>backup-dashboard</code> m√° webov√© rozhran√≠ pro git na portu 8090: <code>http://localhost:8090/git</code>. Umo≈æ≈àuje prohl√≠≈æen√≠ logu, diffu, commitov√°n√≠ a rollback bez CLI."
        }
      ]
    },
    {
      "id": "bezpecnost",
      "title": "Co neverzovat",
      "icon": "üö´",
      "blocks": [
        {
          "type": "list",
          "entries": [
            "<code>*.backup-*</code> ‚Äî ruƒçn√≠ z√°lohy soubor≈Ø (jsou v <code>.gitignore</code>)",
            "<code>.env</code>, <code>credentials.*</code> ‚Äî citliv√° data",
            "<code>__pycache__/</code>, <code>*.pyc</code> ‚Äî generovan√© Python soubory",
            "<code>docs/output/</code> ‚Äî generovan√© HTML (build.py output)",
            "<code>.build-state.json</code> ‚Äî hash cache"
          ]
        },
        {
          "type": "card",
          "variant": "warning",
          "title": "‚ö†Ô∏è Nikdy git add -A",
          "text": "V≈°echny soubory lze p≈ôidat neintenzion√°lnƒõ. V≈ædy <strong>explicitnƒõ</strong> pojmenov√°vej soubory."
        }
      ]
    },
    {
      "id": "vetve",
      "title": "Vƒõtven√≠",
      "icon": "üå≥",
      "blocks": [
        {
          "type": "list",
          "entries": [
            "<strong>main</strong> ‚Äî v√Ωchoz√≠ a prim√°rn√≠ vƒõtev (produkce)",
            "<strong>feature/*</strong> ‚Äî feature vƒõtve dle pot≈ôeby, merge do main",
            "<strong>experimental/*</strong> ‚Äî experiment√°ln√≠ k√≥d (nemerge bez review)"
          ]
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git switch -c feature/nazev       # Nov√° feature vƒõtev\ngit switch main                    # Zpƒõt na main\ngit merge feature/nazev             # Merge do main"
        }
      ]
    },
    {
      "id": "integrace-projektov",
      "title": "Git integrace v projektech",
      "icon": "üîß",
      "blocks": [
        {
          "type": "heading",
          "text": "backup-dashboard ‚Äî Git UI"
        },
        {
          "type": "text",
          "text": "<code>backup-dashboard/routes/git.py</code> implementuje HTTP endpointy. Webov√© rozhran√≠: <code>http://localhost:8090/git</code>"
        },
        {
          "type": "table",
          "headers": ["Endpoint", "Metoda", "Popis"],
          "rows": [
            ["<code>/git</code>", "GET", "Git str√°nka (git.html template)"],
            ["<code>/api/git/log</code>", "GET", "Historie commit≈Ø"],
            ["<code>/api/git/diff</code>", "GET", "Diff konkr√©tn√≠ho commitu"],
            ["<code>/api/git/status</code>", "GET", "Aktu√°ln√≠ status (staged/unstaged)"],
            ["<code>/api/git/commit</code>", "POST", "Vytvo≈ôen√≠ commitu z UI"],
            ["<code>/api/git/rollback</code>", "POST", "Rollback na commit"]
          ]
        },
        {
          "type": "heading",
          "text": "info-sync.py ‚Äî SYNC bloky"
        },
        {
          "type": "text",
          "text": "<code>info-sync.py</code> vol√° <code>git log --oneline -1</code> a zapisuje do <code><!-- SYNC:START --></code> blok≈Ø v CLAUDE.md. Nap≈ô: <code>- Posledn√≠ commit: `abc123` ‚Äî zpr√°va</code>"
        },
        {
          "type": "heading",
          "text": "web-edit ‚Äî bez git integrace"
        },
        {
          "type": "text",
          "text": "<code>web-edit/</code> um√≠ editovat MD soubory online, ale nem√° vlastn√≠ git committing ‚Äî zmƒõny je t≈ôeba commitovat ruƒçnƒõ p≈ôes CLI nebo dashboard."
        },
        {
          "type": "heading",
          "text": "docs ‚Äî nez√°visl√©"
        },
        {
          "type": "text",
          "text": "<code>docs/docserver.py</code> ƒçte CLAUDE.md p≈ô√≠mo z disku. Git info zobrazuje jen skrze SYNC bloky zapsan√© <code>info-sync.py</code>."
        }
      ]
    },
    {
      "id": "cli-reference",
      "title": "CLI Reference",
      "icon": "‚å®Ô∏è",
      "blocks": [
        {
          "type": "heading",
          "text": "Status a diff"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git status                         # Aktu√°ln√≠ stav\ngit diff                           # Unstaged zmƒõny\ngit diff --staged                  # Staged zmƒõny\ngit log --oneline -10              # Posledn√≠ch 10 commit≈Ø\ngit show abc123                    # Detail konkr√©tn√≠ho commitu"
        },
        {
          "type": "heading",
          "text": "Staginig a commit"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git add file1 file2                # Stage konkr√©tn√≠ch soubor≈Ø\ngit restore file1                  # Vr√°t√≠ zmƒõny v file1\ngit restore --staged file1         # Unstage file1\ngit commit -m \"zpr√°va\"              # Vytvo≈ô commit\ngit commit --amend                 # Uprav posledn√≠ commit (varov√°n√≠: zmƒõn√≠ hash)"
        },
        {
          "type": "heading",
          "text": "Push a pull"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git push gitea main                # Push na Gitea\ngit push github main               # Push na GitHub\ngit push gitea main && git push github main  # Push na oba\ngit pull gitea main                # Pull z Gitea\ngit fetch --all                    # Fetch ze v≈°ech remot≈Ø"
        },
        {
          "type": "heading",
          "text": "Rollback a history"
        },
        {
          "type": "code",
          "lang": "bash",
          "text": "git reset --soft HEAD~1            # Undo commit, zmƒõny z≈Øst√°vaj√≠ staged\ngit reset --hard HEAD~1            # Undo commit, v≈°echny zmƒõny se zahod (VAROV√ÅN√ç)\ngit revert abc123                  # Vytvo≈ô nov√Ω commit, kter√Ω ru≈°√≠ abc123\ngit reflog                         # Historie v≈°ech HEAD zmƒõn (pro recovery)"
        }
      ]
    },
    {
      "id": "faq",
      "title": "FAQ",
      "icon": "‚ùì",
      "blocks": [
        {
          "type": "heading",
          "text": "Jak se synchronizuje GitHub s Gitea?"
        },
        {
          "type": "text",
          "text": "Manu√°lnƒõ ‚Äî kdy≈æ pushne≈° na oba remoty: <code>git push gitea main && git push github main</code>. Nen√≠ to automatick√©, ale lze nastavit GitHub Actions pro mirror."
        },
        {
          "type": "heading",
          "text": "Co kdy≈æ se commitnu ≈°patn√©mu commitovac√≠mu zpr√°vƒõ?"
        },
        {
          "type": "text",
          "text": "Pokud je≈°tƒõ jsi nepushoval: <code>git commit --amend -m \"nov√° zpr√°va\"</code>. Pokud pushoval: <code>git revert abc123</code> ‚Äî vytvo≈ô√≠ nov√Ω commit, kter√Ω ru≈°√≠ zmƒõny (vhodn√© pro spolupr√°ci)."
        },
        {
          "type": "heading",
          "text": "Jak se vr√°tit na star≈°√≠ commit?"
        },
        {
          "type": "text",
          "text": "Viz tab CLI Reference ‚Üí Rollback. <strong>Varov√°n√≠:</strong> <code>git reset --hard</code> zma≈æe v≈°echny zmƒõny ‚Äî pou≈æ√≠vej jen pokud si jist√Ω."
        }
      ]
    }
  ]
}
