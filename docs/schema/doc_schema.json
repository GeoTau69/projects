{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Projektov√° dokumentace",
  "description": "JSON Schema pro datov√© soubory generovan√© AI. Soubory se ukl√°daj√≠ do docs/data/{projekt}.json a renderuj√≠ se p≈ôes Jinja2 bez √∫ƒçasti AI.",
  "type": "object",
  "required": ["project", "updated"],
  "additionalProperties": false,
  "properties": {
    "project": {
      "type": "string",
      "description": "ID projektu ‚Äî shodn√© s n√°zvem adres√°≈ôe v ~/projects/. P≈ô√≠klad: backup-dashboard"
    },
    "display_name": {
      "type": "string",
      "description": "Zobrazovan√Ω n√°zev projektu. P≈ô√≠klad: Fedora Backup Dashboard"
    },
    "version": {
      "type": "string",
      "description": "Verze dokumentace. P≈ô√≠klad: 1.2.0"
    },
    "updated": {
      "type": "string",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
      "description": "Datum posledn√≠ aktualizace ve form√°tu YYYY-MM-DD"
    },
    "description": {
      "type": "string",
      "description": "Kr√°tk√Ω popis projektu (1-2 vƒõty)"
    },
    "status": {
      "type": "string",
      "enum": ["active", "wip", "planned", "archived"],
      "description": "Stav projektu"
    },
    "port": {
      "type": ["integer", "null"],
      "description": "Port na kter√©m bƒõ≈æ√≠ slu≈æba, nebo null pokud nen√≠ webov√° slu≈æba"
    },
    "tech": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Seznam technologi√≠. P≈ô√≠klad: [python, fastapi, jinja2]"
    },
    "access": {
      "type": "object",
      "description": "P≈ô√≠stupov√© URL (jen pokud projekt m√° webov√Ω interface)",
      "additionalProperties": false,
      "properties": {
        "local":     {"type": "string", "description": "Lok√°ln√≠ URL, nap≈ô. http://localhost:8090"},
        "lan":       {"type": "string", "description": "LAN URL, nap≈ô. http://192.168.0.101:8090"},
        "tailscale": {"type": "string", "description": "Tailscale URL, nap≈ô. http://fedora:8090"}
      }
    },
    "back_link": {
      "type": "object",
      "description": "Voliteln√Ω odkaz zpƒõt (zobrazuje se v top baru). P≈ô√≠klad: {'href': '/', 'label': 'üè† Zpƒõt na Dashboard'}",
      "additionalProperties": false,
      "properties": {
        "href":  {"type": "string", "description": "URL odkazu"},
        "label": {"type": "string", "description": "Text odkazu"}
      }
    },
    "modules": {
      "type": "array",
      "description": "K√≥dov√© moduly projektu. AI generuje z√°znam pro ka≈æd√Ω ve≈ôejn√Ω modul/t≈ô√≠du.",
      "items": {
        "type": "object",
        "required": ["id", "name", "purpose", "status"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "Unik√°tn√≠ ID modulu (slug). P≈ô√≠klad: borg, helpers, routes-system"
          },
          "name": {
            "type": "string",
            "description": "N√°zev souboru nebo t≈ô√≠dy. P≈ô√≠klad: routes/borg.py"
          },
          "file": {
            "type": "string",
            "description": "Relativn√≠ cesta souboru od ko≈ôene projektu. P≈ô√≠klad: routes/borg.py"
          },
          "purpose": {
            "type": "string",
            "description": "Co modul dƒõl√° ‚Äî struƒçnƒõ, 1 vƒõta. P≈ô√≠klad: Borg Backup endpointy a operace s archivy."
          },
          "status": {
            "type": "string",
            "enum": ["stable", "beta", "wip", "deprecated"],
            "description": "Stabilita modulu"
          },
          "public_methods": {
            "type": "array",
            "description": "Ve≈ôejn√© metody/funkce (ne intern√≠ pomocn√© funkce s _ prefixem)",
            "items": {
              "type": "object",
              "required": ["name", "description"],
              "additionalProperties": false,
              "properties": {
                "name":        {"type": "string", "description": "N√°zev metody/funkce bez z√°vorek"},
                "params":      {"type": "string", "description": "Parametry jako string. P≈ô√≠klad: path: Path, force: bool = False"},
                "returns":     {"type": "string", "description": "N√°vratov√° hodnota. P≈ô√≠klad: list[dict]"},
                "description": {"type": "string", "description": "Co metoda dƒõl√° ‚Äî struƒçnƒõ"}
              }
            }
          },
          "dependencies": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Z√°vislosti na jin√Ωch modulech ve stejn√©m projektu. P≈ô√≠klad: [helpers.get_borg_env, routes.snapshots.get_snapper_list]"
          },
          "notes": {
            "type": "string",
            "description": "D≈Øle≈æit√© pozn√°mky, known issues, TODO. Nepat≈ô√≠ sem: koment√°≈ôe z k√≥du, historick√© pozn√°mky."
          }
        }
      }
    },
    "sections": {
      "type": "array",
      "description": "Dokumentaƒçn√≠ sekce str√°nky. Ka≈æd√° sekce se renderuje jako <h2> s obsahem.",
      "items": {
        "type": "object",
        "required": ["id", "title", "blocks"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "HTML anchor ID sekce. P≈ô√≠klad: architektura, cli-snapper, rizika"
          },
          "title": {
            "type": "string",
            "description": "Nadpis sekce (bez ikony ‚Äî ikona je separ√°tn√≠ pole)"
          },
          "icon": {
            "type": "string",
            "description": "Emoji ikona p≈ôed nadpisem. P≈ô√≠klad: üóÉÔ∏è"
          },
          "blocks": {
            "type": "array",
            "description": "Obsahov√© bloky sekce. Ka≈æd√Ω blok m√° povinn√Ω field 'type'.",
            "items": {
              "type": "object",
              "required": ["type"],
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["text", "code", "table", "card", "list", "heading", "live_status"],
                  "description": "Typ bloku: text=odstavec, code=k√≥dov√Ω blok, table=tabulka, card=info/warn/danger karta, list=seznam, heading=podnadpis h3, live_status=≈æiv√Ω status widget (vol√° API endpoint)"
                },
                "api_endpoint": {
                  "type": "string",
                  "description": "Pro type=live_status: URL API endpointu pro ≈æiv√Ω status. P≈ô√≠klad: /api/health"
                },
                "text": {
                  "type": "string",
                  "description": "Obsah bloku. Pro type=text: m≈Ø≈æe obsahovat inline HTML (<code>, <strong>). Pro type=code: surov√Ω k√≥d. Pro type=heading: text nadpisu."
                },
                "lang": {
                  "type": "string",
                  "description": "Jazyk pro code blok (jen pro zobrazen√≠). P≈ô√≠klad: bash, python, sql"
                },
                "variant": {
                  "type": "string",
                  "enum": ["info", "warning", "danger", "success"],
                  "description": "Pro type=card: vizu√°ln√≠ styl karty. info=modra, warning=≈ælut√°, danger=ƒçerven√°, success=zelen√°"
                },
                "title": {
                  "type": "string",
                  "description": "Pro type=card: nadpis karty. P≈ô√≠klad: ‚ö†Ô∏è Borg kl√≠ƒç a heslo"
                },
                "headers": {
                  "type": "array",
                  "items": {"type": "string"},
                  "description": "Pro type=table: z√°hlav√≠ sloupc≈Ø"
                },
                "rows": {
                  "type": "array",
                  "items": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "description": "Pro type=table: ≈ô√°dky tabulky. Ka≈æd√Ω ≈ô√°dek je pole string≈Ø (m≈Ø≈æe obsahovat inline HTML)."
                },
                "entries": {
                  "type": "array",
                  "items": {"type": "string"},
                  "description": "Pro type=list a type=card s polo≈ækami: seznam polo≈æek (m≈Ø≈æe obsahovat inline HTML). POZOR: kl√≠ƒç je 'entries', nikoli 'items' (items je rezervovan√© slovo Jinja2)."
                },
                "ordered": {
                  "type": "boolean",
                  "description": "Pro type=list: true = ƒç√≠slovan√Ω seznam <ol>, false/vynech√°no = odr√°≈ækov√Ω <ul>"
                },
                "code": {
                  "type": "string",
                  "description": "Pro type=card: voliteln√Ω k√≥dov√Ω blok uvnit≈ô karty"
                }
              }
            }
          }
        }
      }
    }
  }
}
